# network interface settings; autogenerated
# Please do NOT modify this file directly, unless you know what
# you're doing.
#
# If you want to manage parts of the network configuration manually,
# please utilize the 'source' or 'source-directory' directives to do
# so.
# PVE will preserve these directives, but will NOT read its network
# configuration from sourced files, so do not attempt to move any of
# the PVE managed interfaces into external files!

auto lo
iface lo inet loopback

iface {{ proxmoxve_physical_interface }} inet manual

auto {{ proxmoxve_bridge_interface }}
iface {{ proxmoxve_bridge_interface }} inet manual
        bridge-ports {{ proxmoxve_physical_interface }}
        bridge-stp off
        bridge-fd 0
        bridge-vlan-aware yes
        bridge-vids 2-4094

auto {{ proxmoxve_bridge_interface }}.{{ proxmoxve_vlan }}
iface {{ proxmoxve_bridge_interface }}.{{ proxmoxve_vlan }} inet static
        address {{ proxmoxve_ipv4 }}
        gateway {{ proxmoxve_gateway_ipv4 }}
        vlan-id {{ proxmoxve_vlan }}
        vlan-raw-device {{ proxmoxve_bridge_interface }}

iface {{ proxmoxve_bridge_interface }}.{{ proxmoxve_vlan }} inet6 static
        address {{ proxmoxve_ipv6 }}
        gateway {{ proxmoxve_gateway_ipv6 }}

{% for vlan in proxmoxve_additional_vlans %}
auto {{ proxmoxve_bridge_interface }}.{{ vlan }}
iface {{ proxmoxve_bridge_interface }}.{{ vlan }} inet manual
        vlan-id {{ vlan }}
        vlan-raw-device {{ proxmoxve_bridge_interface }}

{% endfor %}

source /etc/network/interfaces.d/*
